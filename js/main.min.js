var MyApp=MyApp||{},MyApp=function(){var a=[],b=function(a,b){for(var d=[],e="",f="",g={url:"img/bike_marker_img.png",size:new google.maps.Size(25,25),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(0,32)},h={coords:[1,1,1,20,18,20,18,1],type:"poly"},i=0;i<b.length;i++){var j=b[i],k=new google.maps.LatLng(parseFloat(j[2]),parseFloat(j[3])),l=new google.maps.Marker({position:k,map:a,icon:g,shape:h,stationName:j[0],stationAddress:j[1],stationCapacity:j[2],stationId:j[5]});d.push(l);var m="https://gbfs.urbansharing.com/oslobysykkel.no/station_status.json"+j[5];$.ajax({url:m,dataType:"json",method:"GET",timeout:3e3,cache:!1,success:function(a){e=a.data.stations.num_bikes_available,f=a.data.stations.num_docks_available},error:function(a){$(".errorLoadingData").html("There was an error loading the data:<p>Request Status: "+a.status+" -  Status Text: "+a.statusText+" & "+a.responseText+"</p>").css("display","block")}});var n='<h3 class="info-header">'+l.stationName+'</h3><ul class="info-list"><li class="info-list__item first"><span>Address:</span> '+l.stationAddress+'</li><li class="info-list__item"><span>Station capacity:</span> '+l.stationCapacity+'</li><li class="info-list__item"><span>Bikes available:</span> '+e+'</li><li class="info-list__item"><span>Docks available:</span> '+f+"</li></ul>",o=new google.maps.InfoWindow({content:n,maxWidth:200});c(a,l,n,o,j)}},c=function(b,c,e,f){google.maps.event.addListener(c,"click",function(c,e,f){return function(){d(),f.setContent(e),f.open(b,c),a[0]=f}}(c,e,f))},d=function(){a.length>0&&(a[0].set("marker",null),a[0].close(),a.length=0)},e=function(){var a={center:{lat:59.911491,lng:10.757933},zoom:14,zoomControl:!0,zoomControlOptions:{position:google.maps.ControlPosition.LEFT_TOP},scaleControl:!0,streetViewControl:!0,streetViewControlOptions:{position:google.maps.ControlPosition.LEFT_TOP}},c=new google.maps.Map(document.getElementById("map-canvas"),a),d="https://gbfs.urbansharing.com/oslobysykkel.no/station_information.json";$.ajax({url:d,dataType:"json",type:"get",timeout:3e3,cache:!1,success:function(a){var d=[];$.each(a.data.stations,function(a,b){d[a]=[b.name,b.capacity,b.lat,b.lon,a,b.address,b.station_id]}),b(c,d)},error:function(a){$(".error").html("<h4>There was an error loading the data:</h4><p>Request Status: "+a.status+" -  Status Text: "+a.statusText+" & "+a.responseText+"</p>").css("display","block")}})},f=function(){google.maps.event.addDomListener(window,"load",e)};return{initMap:f}}();MyApp.initMap();